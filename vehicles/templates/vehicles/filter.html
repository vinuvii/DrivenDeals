<!-- filter.html -->

{% extends 'base.html' %}

{% block extra_head %}
<style>
    /* Add any custom styles here */
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h1>Filter Vehicles</h1>

    <!-- Filters Section -->
    <form id="filterForm">
        <div class="form-group">
            <label for="makeSelect">Make:</label>
            <select id="makeSelect" name="make">
                <option value="">Any</option>
                <option value="Toyota">Toyota</option>
                <option value="Honda">Honda</option>
                <!-- Add more options dynamically if needed -->
            </select>
        </div>

        <div class="form-group">
            <label for="modelInput">Model:</label>
            <input type="text" id="modelInput" name="model">
        </div>

        <div class="form-group">
            <label for="yearSelect">Year:</label>
            <select id="yearSelect" name="year">
                <option value="">Any</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <!-- Add more options dynamically if needed -->
            </select>
        </div>

        <div class="form-group">
            <label for="bodyTypeSelect">Body Type:</label>
            <select id="bodyTypeSelect" name="body_type">
                <option value="">Any</option>
                <option value="Sedan">Sedan</option>
                <option value="SUV">SUV</option>
                <!-- Add more options dynamically if needed -->
            </select>
        </div>

        <div class="form-group">
            <label for="seatsSelect">Number of Seats:</label>
            <select id="seatsSelect" name="seats">
                <option value="">Any</option>
                <option value="2">2</option>
                <option value="4">4</option>
                <!-- Add more options dynamically if needed -->
            </select>
        </div>

        <div class="form-group">
            <label for="transmissionSelect">Transmission Type:</label>
            <select id="transmissionSelect" name="transmission">
                <option value="">Any</option>
                <option value="Automatic">Automatic</option>
                <option value="Manual">Manual</option>
                <!-- Add more options dynamically if needed -->
            </select>
        </div>

        <div class="form-group">
            <label for="fuelTypeSelect">Fuel Type:</label>
            <select id="fuelTypeSelect" name="fuel_type">
                <option value="">Any</option>
                <option value="Gasoline">Gasoline</option>
                <option value="Diesel">Diesel</option>
                <!-- Add more options dynamically if needed -->
            </select>
        </div>

        <div class="form-group">
            <label for="engineCapacityInput">Engine Capacity:</label>
            <input type="text" id="engineCapacityInput" name="engine_capacity">
        </div>

        <div class="form-group">
            <label for="engineTypeSelect">Engine Type:</label>
            <select id="engineTypeSelect" name="engine_type">
                <option value="">Any</option>
                <option value="Inline-4">Inline-4</option>
                <option value="V6">V6</option>
                <!-- Add more options dynamically if needed -->
            </select>
        </div>

        <div class="form-group">
            <label for="absCheckbox">ABS:</label>
            <select id="absCheckbox" name="abs">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="alloyWheelsCheckbox">Alloy Wheels:</label>
            <select id="alloyWheelsCheckbox" name="alloy_wheels">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="airbagsCheckbox">Airbags:</label>
            <select id="airbagsCheckbox" name="airbags">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="airConditioningCheckbox">Air Conditioning:</label>
            <select id="airConditioningCheckbox" name="air_conditioning">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="powerSteeringCheckbox">Power Steering:</label>
            <select id="powerSteeringCheckbox" name="power_steering">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="powerWindowsCheckbox">Power Windows:</label>
            <select id="powerWindowsCheckbox" name="power_windows">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="centralLockingCheckbox">Central Locking:</label>
            <select id="centralLockingCheckbox" name="central_locking">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="reverseCameraCheckbox">Reverse Camera:</label>
            <select id="reverseCameraCheckbox" name="reverse_camera">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="leatherSeatsCheckbox">Leather Seats:</label>
            <select id="leatherSeatsCheckbox" name="leather_seats">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="sunroofCheckbox">Sunroof:</label>
            <select id="sunroofCheckbox" name="sunroof">
                <option value="">Any</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="priceRange">Price Range:</label>
            <input type="text" id="priceRange" name="price">
        </div>

        <button type="submit">Apply Filters</button>
    </form>

    <div id="vehicleContainer">
        <!-- Filtered vehicle results will be displayed here -->
    </div>

    <script>
        document.getElementById('filterForm').addEventListener('submit', async function(event) {
            event.preventDefault(); // Prevent default form submission

            const formData = new FormData(this); // Get form data

            try {
                // Send a POST request to your backend endpoint
                const response = await fetch('/api/filter-vehicles/', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error('Failed to fetch vehicle data.');
                }

                const vehicles = await response.json(); // Parse JSON response

                // Update the UI with filtered vehicle data
                const vehicleContainer = document.getElementById('vehicleContainer');

                if (vehicles.length > 0) {
                    let html = '<ul>';
                    vehicles.forEach(vehicle => {
                        html += `<li>${vehicle.make} ${vehicle.model} (${vehicle.year})</li>`;
                        // Add other details as per your requirement
                    });
                    html += '</ul>';
                    vehicleContainer.innerHTML = html;
                } else {
                    vehicleContainer.innerHTML = '<p>No vehicles found as per filter.</p>';
                }
            } catch (error) {
                console.error('Error fetching vehicle data:', error);
            }
        });
    </script>
</div>
{% endblock %}




