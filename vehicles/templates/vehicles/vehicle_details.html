<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vehicle Details</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body { background-color: #f4f4f4; }
    .container { max-width: 1200px; }
    .breadcrumb { background-color: #e9ecef; }
    .card { box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); }
    .img-fluid { border-radius: 5px; }
    #placeBidButton { background-color: #007bff; color: white; }
  </style>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Back to previous page</a></li>
            <li class="breadcrumb-item"><a href="#">Vehicle Marketplace</a></li>
            <li class="breadcrumb-item active" aria-current="page">Vehicle Details</li>
          </ol>
        </nav>
        <h2>{{ vehicle.model }} {{ vehicle.year }}</h2>
        <p>{{ vehicle.description }}</p>

        {% if vehicle.picture %}
          <img src="{{ vehicle.picture.url }}" class="img-fluid" alt="{{ vehicle.model }}">
        {% else %}
          <img src="https://via.placeholder.com/800x600" class="img-fluid" alt="{{ vehicle.model }}">
        {% endif %}
      </div>
      <div class="col-md-4">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Seller Information</h5>
            <p class="card-text">{{ vehicle.seller.username }}</p>
            <p class="card-text">Seller Rating: {{ vehicle.seller.rating }}</p>
            <h3 class="card-text">{{ vehicle.price }}</h3>
            <p class="card-text">Ends in {{ vehicle.auction_end_time }}</p>
            <button class="btn btn-primary btn-block" id="placeBidButton" data-toggle="modal" data-target="#placeBidModal">Place bid</button>
            <button class="btn btn-outline-secondary btn-block">Add to watchlist</button>
            <hr>
            <p class="card-text">Get an inspection report</p>
            <p class="card-text">Get delivery quotes</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Place Bid Pop Up -->
  <div class="modal fade" id="placeBidModal" tabindex="-1" role="dialog" aria-labelledby="placeBidModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="placeBidModalLabel">Place your bid</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Current bid: {{ vehicle.current_bid_amount }}</p>
          <p>Buyer is responsible for vehicle pick-up or shipping</p>
          <p>{{ vehicle.bids_count }} bids Â· Ends in {{ vehicle.auction_end_time }}</p>
          <form id="bidForm" method="POST" action="{% url 'place_bid' %}">
            {% csrf_token %}
            <input type="hidden" name="car_id" value="{{ vehicle.id }}">
            <div class="form-group mt-3">
              <label for="max-bid">Your max bid</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">$</span>
                </div>
                <input type="number" class="form-control" id="max-bid" name="bid_amount" placeholder="Enter your maximum bid amount" min="{{ vehicle.min_bid_amount }}" required>
              </div>
            </div>
            <p class="text-muted">By placing a bid, you are giving your express consent to share your contact information with the seller and authorizing the seller to contact you regarding this vehicle or similar vehicles. For more information see our Vehicle Marketplace Bidding Policy.</p>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-primary">Bid</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
